import"./main-6011e860.js";const b="https://rickandmortyapi.com/api/character",Y=new URL("/rick-and-morty-team-project/assets/characters-ba1e72bb.html",self.location),E=new URL("data:application/octet-stream;base64,PGFydGljbGUgY2xhc3M9ImNoYXJhY3Rlci1jYXJkIj4KICAgIDxkaXYgY2xhc3M9ImNoYXJhY3Rlci1jYXJkX19pbWFnZS13cmFwcGVyIj4KICAgICAgICA8aW1nIHNyYz0ie3tpbWFnZX19IiBhbHQ9Int7bmFtZX19IiBjbGFzcz0iY2hhcmFjdGVyLWNhcmRfX2ltYWdlIiAvPgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY2hhcmFjdGVyLWNhcmRfX2JvZHkiPgogICAgICAgIDxoMyBjbGFzcz0iY2hhcmFjdGVyLWNhcmRfX25hbWUiPnt7bmFtZX19PC9oMz4KICAgICAgICA8cCBjbGFzcz0iY2hhcmFjdGVyLWNhcmRfX29yaWdpbiI+CiAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9ImNoYXJhY3Rlci1jYXJkX19vcmlnaW4tLWNsIj5PcmlnaW46PC9zdHJvbmc+IHt7b3JpZ2lufX0KICAgICAgICA8L3A+CiAgICAgICAgPHAgY2xhc3M9ImNoYXJhY3Rlci1jYXJkX19sb2NhdGlvbiI+CiAgICAgICAgICAgIDxzdHJvbmcgY2xhc3M9ImNoYXJhY3Rlci1jYXJkX19sb2NhdGlvbi0tY2wiPkxvY2F0aW9uOjwvc3Ryb25nPiB7e2xvY2F0aW9ufX0KICAgICAgICA8L3A+CiAgICA8L2Rpdj4KPC9hcnRpY2xlPg==",self.location);let A=null,g=1,m=null,f=!1;function p(){document.querySelectorAll(".dropdown.dropdown--open").forEach(e=>e.classList.remove("dropdown--open"))}function P(){const e=document.querySelectorAll(".dropdown");e.length&&(e.forEach(n=>{const c=n.dataset.select,r=n.querySelector(".dropdown__trigger"),s=n.querySelector(".dropdown__value"),t=n.querySelectorAll(".dropdown__item"),o=document.getElementById(`filter-${c}`);if(!r||!s||!t.length||!o)return;const i=o.options[o.selectedIndex];if(i){const a=i.value,l=i.textContent.trim();s.textContent=l,t.forEach(d=>{d.classList.toggle("dropdown__item--selected",d.dataset.value===a)})}r.addEventListener("click",a=>{a.stopPropagation();const l=n.classList.contains("dropdown--open");p(),l||n.classList.add("dropdown--open")}),t.forEach(a=>{a.addEventListener("click",()=>{const l=a.dataset.value,d=a.textContent.trim();s.textContent=d,t.forEach(u=>u.classList.toggle("dropdown__item--selected",u===a)),o.value=l,o.dispatchEvent(new Event("change",{bubbles:!0})),p()})})}),document.addEventListener("click",n=>{n.target.closest(".dropdown")||p()}))}async function x(){const e=document.getElementById("characters-root"),c=await(await fetch(Y)).text();e.innerHTML=c}async function X(){const n=await(await fetch(E)).text();A=Handlebars.compile(n)}async function j(e){const n=`${b}?page=${e}`,c=await fetch(n);if(!c.ok)throw new Error("Failed to load characters");return await c.json()}function k(e,n=!1){const c=document.getElementById("characters-list"),r=e.map(s=>{var t,o;return A({name:s.name,image:s.image,origin:((t=s.origin)==null?void 0:t.name)||"Unknown",location:((o=s.location)==null?void 0:o.name)||"Unknown"})}).join("");n?c.insertAdjacentHTML("beforeend",r):c.innerHTML=r}function C(){const e=document.getElementById("characters-load-more");if(!e)return;const n=m!==null&&g>=m;e.style.display=n?"none":"inline-block",e.disabled=n||f}async function _(){g=1,await y(g,!1)}async function F(){f||m!==null&&g>=m||(g+=1,await y(g,!0))}async function y(e,n){var c;try{f=!0,C();const r=await j(e);m=((c=r.info)==null?void 0:c.pages)??null,k(r.results,n)}catch(r){console.error(r)}finally{f=!1,C()}}function S(){const e=document.getElementById("characters-load-more");e&&e.addEventListener("click",F)}async function R(){await x(),P(),await X(),S(),await _()}document.addEventListener("DOMContentLoaded",R);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("characters-filters"),n=document.querySelectorAll(".dropdown");function c(){n.forEach(t=>{const o=t.getAttribute("data-select"),i=document.querySelector(`select[name="${o}"]`),a=t.querySelector(".dropdown__trigger"),l=t.querySelector(".dropdown__value"),d=t.querySelector(".dropdown__menu"),u=t.querySelectorAll(".dropdown__item");!i||!a||!d||(a.addEventListener("click",()=>{t.classList.toggle("dropdown--active")}),u.forEach(h=>{h.addEventListener("click",I=>{const v=I.currentTarget.getAttribute("data-value"),w=I.currentTarget.textContent.trim();i.value=v,l.textContent=w,u.forEach(L=>L.classList.remove("dropdown__item--selected")),I.currentTarget.classList.add("dropdown__item--selected"),t.classList.remove("dropdown--active")})}),document.addEventListener("click",h=>{t.contains(h.target)||t.classList.remove("dropdown--active")}))})}function r(){const t=new FormData(e),o={};for(const[i,a]of t.entries())a&&a.trim()!==""&&a.trim().toLowerCase()!=="all"&&(o[i]=a.trim());return o.gender&&o.gender.toLowerCase()==="all"&&delete o.gender,o}function s(t){console.log("Применение фильтров с параметрами:",t);const o=new URLSearchParams(t).toString();console.log(`Полный Query String для API: ?${o}`)}e.addEventListener("submit",t=>{t.preventDefault();const o=r();s(o)}),c()});
